@model IEnumerable<DigitalTrainer.Models.DatosPersonales>
@{
    Layout = "~/Views/Shared/_LayoutZacson.cshtml";
    ViewData["Title"] = "Index";
    var usuarios = Model.ToList();
}

<div class="main-content" style="max-width: 1200px; font-size: 1.2rem; margin: 0 auto;">
    <h1 class="text-center my-4" style="color:#FCFCFC">Configuración de Datos</h1>

    @if (usuarios.Any())
    {
        <div class="container">
            <ul class="nav nav-tabs" id="userTab" role="tablist">
                @for (int i = 0; i < usuarios.Count; i++)
                {
                    <li class="nav-item" role="presentation">
                        <button style="font-size:15px;" class="nav-link @(i == 0 ? "active" : "")" id="tab-@i" data-bs-toggle="tab" data-bs-target="#user-@i" type="button" role="tab" aria-controls="user-@i" aria-selected="@(i == 0 ? "true" : "false")">
                            @usuarios[i].Nombre
                        </button>
                    </li>
                }
            </ul>
            <div class="tab-content p-4 border-bottom border-start border-end bg-light" id="userTabContent">
                @for (int i = 0; i < usuarios.Count; i++)
                {
                    var item = usuarios[i];
                    <div class="tab-pane fade @(i == 0 ? "show active" : "")" id="user-@i" role="tabpanel" aria-labelledby="tab-@i">
                        <dl class="row">
                            <dt style="font-size:15px; color:black" class="col-sm-4">Nombre</dt>
                            <dd style="font-size:15px; color:black" class="col-sm-8">@item.Nombre</dd>

                            <dt style="font-size:15px; color:black" class="col-sm-4">Teléfono</dt>
                            <dd style="font-size:15px; color:black" class="col-sm-8">@item.Telefono</dd>

                            <dt style="font-size:15px; color:black" class="col-sm-4">Correo Electrónico</dt>
                            <dd style="font-size:15px; color:black" class="col-sm-8">@item.CorreoElectronico</dd>

                            <dt style="font-size:15px; color:black" class="col-sm-4">Fecha Nacimiento</dt>
                            <dd style="font-size:15px; color:black" class="col-sm-8">@item.FechaNacimiento.ToString("dd/MM/yyyy")</dd>

                            <dt style="font-size:15px; color:black" class="col-sm-4">Género</dt>
                            <dd style="font-size:15px; color:black" class="col-sm-8">@item.Genero.ToString()</dd>

                            <dt style="font-size:15px; color:black" class="col-sm-4">Peso</dt>
                            <dd style="font-size:15px; color:black" class="col-sm-8">@($"{item.Peso} KG")</dd>

                            <dt style="font-size:15px; color:black" class="col-sm-4">Altura</dt>
                            <dd style="font-size:15px; color:black" class="col-sm-8">@($"{item.Altura} CM")</dd>
                        </dl>
                        <div class="text-end">
                            @Html.ActionLink("Configurar Datos", "Edit", new { id = item.IdDatosPersonales }, new { @class = "btn btn-outline-primary btn-sm me-2" })

                            <!-- Botón de Cerrar Sesión MEJORADO -->
                            <form asp-controller="Auth" asp-action="Logout" method="post" class="d-inline">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-outline-danger btn-sm"
                                        onclick="return confirm('¿Estás seguro que deseas cerrar sesión?');">
                                    <i style="font-size:15px; class=" fas fa-sign-out-alt me-1"></i> Cerrar Sesión
                                </button>
                            </form>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
</div>